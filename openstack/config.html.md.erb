---
title: Configuring BOSH Director on OpenStack
owner: Ops Manager
iaas: OpenStack
install_type: manual
---

This topic describes how you can configure BOSH Director after you deploy <%= vars.ops_manager_first %> on OpenStack. Use this topic when [Installing <%= vars.ops_manager %> on OpenStack](../install/openstack.html).

* Before you begin this procedure, ensure that you have successfully completed all steps in [Provisioning the OpenStack infrastructure](setup.html).

* After you complete this procedure, follow the
instructions in [Configuring <%= vars.app_runtime_abbr %>](https://docs.vmware.com/en/VMware-Tanzu-Application-Service/<%= vars.current_tas_version %>/tas-for-vms/configure-pas.html).

<p> You can also complete the procedures in this topic using the <%= vars.ops_manager %> API. For more information, see <a href="../install/ops-man-api.html">Using the <%= vars.ops_manager %> API</a>.</p>

## <a id='log-in'></a> Step 1: Log into <%= vars.ops_manager %>

1. In a web browser, go to the fully qualified domain you created in the [Create a DNS entry](setup.html#dns-entry) step of _Provisioning the OpenStack Infrastructure_.

1. Log in to <%= vars.ops_manager %>. To log in, see [Log in to <%= vars.ops_manager %> for the first time](../login.html#login-first-time).


## <a id='openstack-config'></a> Step 2: OpenStack Configs page

1. In your OpenStack dashboard, click **Project > Compute > Access & Security**. Click the **API Access** tab.

2. In the **SERVICE** column, find the **Identity** row. Record the **Service Endpoint** in this row. You need this Service Endpoint as the Authentication URL for <%= vars.ops_manager %> in a later step.

    ![alt-text=""](../common/images/openstack/record-endpoint.png)

1. In the <%= vars.ops_manager %> Installation Dashboard, click the **BOSH Director** tile.

2. Select **OpenStack Configs**.

3. Complete the **OpenStack Management Console Config** page with the following information:
    * **Name**: Enter a unique name for the OpenStack config.
    * **Authentication URL**: Enter the Service Endpoint for the Identity service that you recorded in a previous step.
    * **Keystone Version**: Choose a Keystone version, either **v2** or **v3**.
      * If you choose **v3**, enter the OpenStack Keystone domain to authenticate against in the **Domain** field. For more information about Keystone domains in OpenStack, see [Domains](https://docs.openstack.org/security-guide/identity/domains.html) in the _OpenStack documentation_.

      ![alt-text=""](../common/images/openstack/om-config-name.png)

    * **Username**: Enter your OpenStack Horizon username. The `PrimaryProject` for the user must be the project you are using to deploy <%= vars.ops_manager %>. For more information, see [Manage projects and users](https://docs.openstack.org/horizon/rocky/admin/manage-projects-and-users.html) in the OpenStack documentation.
    * **Password**: Enter your OpenStack Horizon password.
    * **Tenant**: Enter your OpenStack tenant name.
    * **Region**: Enter `RegionOne`, or another region if recommended by your OpenStack administrator.

      ![alt-text=""](../common/images/openstack/om-config-username.png)

    * **Select OpenStack Network Type**: Select either **Nova**, the legacy OpenStack networking model, or **Neutron**, the newer networking model.
    * **Ignore Server Availability Zone**: Ensure that the check box is not selected.
    * **Security Group Name**: Enter `opsmanager`. You created this Security Group in the [Configure Security](setup.html#security) step of _Provisioning the OpenStack Infrastructure_.
    * **Key Pair Name**: Enter the name of the key pair that you created in the [Configure Security](setup.html#security) step of _Provisioning the OpenStack Infrastructure_.

      ![alt-text=""](../common/images/openstack/om-config-network.png)

    * **SSH Private Key**: In a text editor, open the key pair file that you downloaded in the [Configure Security](setup.html#security) step of _Provisioning the OpenStack Infrastructure_. Copy and paste the contents of the key pair file into the field.
    * (Optional) **API SSL Certificate**: If you configured API SSL termination in your OpenStack Dashboard, enter your **API SSL Certificate**.
    * **Disable DHCP**: Do not select the check box unless your configuration requires it.
    * **Boot From Volume**: Select the check box to boot VMs from a Cinder volume.

      ![alt-text=""](../common/images/openstack/om-config-ssh.png)

1. Click **Save**.

2. (Optional) Click **Add OpenStack Config** to configure additional data centers. Click **Save** for each additional OpenStack config to add it successfully. For more information, see [Managing Multiple Data Centers](../install/multiple-datacenters.html).


## <a id='advanced-config'></a> Step 3: Advanced Config page (optional)

<p> This is an advanced option. Most users leave this field blank.</p>

1. In <%= vars.ops_manager %>, select **Advanced Infrastructure Config**.

    ![alt-text=""](../common/images/openstack/om-advanced-infra.png)

1. If your OpenStack environment requires specific connection options, enter them in the **Connection Options** text box in JSON format. For example: `'connection_options' => { 'read_timeout' => 200 }`

    <p> Your connection options apply to all of your OpenStack configs.</p>

2. Click **Save**.


## <a id='director-config'></a> Step 4: Director Config page

<%= partial "../common/director-config" %>

## <a id='az-config'></a> Step 5: Create Availability Zones page

1. In <%= vars.ops_manager %>, select **Create Availability Zones**.

    ![alt-text=""](../common/images/openstack/create-az.png)

1. In **Name** text box, enter the name of the availability zone that you selected in the [Launch <%= vars.ops_manager %> VM](setup.html#launch-om-vm) step of _Provisioning the OpenStack Infrastructure_.

2. (Optional) Using the **IaaS Configuration** drop-down menu, select an OpenStack config name. The default is set to your first OpenStack config.

3. In **OpenStack Availability Zone**, enter the OpenStack AZ of your OpenStack environment. Many OpenStack environments default to `nova`.

4. Click **Add** for each additional OpenStack config you created in [Step 2: OpenStack Configs page](#openstack-config). Give each AZ a unique **Name** and an **IaaS Configuration** with a different OpenStack config.

5. Click **Save**.

## <a id='create-networks'></a> Step 6: Create Networks page

1. In the OpenStack dashboard, click **Project > Network > Networks**.

1. Click the name of the network that contains the private subnet where you deployed the <%= vars.ops_manager %> VM. The OpenStack Network Detail page displays your network settings. In the **Subnets** table, the row for your subnet contains the **NETWORK ADDRESS** and the **GATEWAY IP**.

    ![alt-text=""](../common/images/openstack/view-network-info.png)

1. In <%= vars.ops_manager %>, click**Create Networks**.

    ![alt-text=""](../common/images/openstack/om-create-networks-config.png)

1. Click **Enable ICMP checks** to enable ICMP on your networks. <%= vars.ops_manager %> uses ICMP checks to confirm that components within your network are reachable. Review the [Configure Security](setup.html#security) step of _Deploying BOSH and <%= vars.ops_manager %> to OpenStack_ to ensure you have configured ICMP in your Security Group.

2. Use the following steps to create one or more <%= vars.ops_manager %> networks using information from your OpenStack network:
    * Click **Add Network**.
    * In **Name**, enter a unique name for the network.
    * Click **Add Subnet** to create one or more subnets for the network.
    * For **Network ID**, use the **ID** from the OpenStack page.
    * For **CIDR**, use the **Network Address** from the OpenStack page.
    * For **Reserved IP Ranges**, use the first 10 IP addresses of the **Network Address** range, and the private IP address of the <%= vars.ops_manager %> instance that you recorded in the [Associate a Floating IP Address](setup.html#floating-ip) step of _Provisioning the OpenStack Infrastructure_.
    * For **DNS**, enter one or more Domain Name Servers.
    * For **Gateway**, use the **Gateway IP** from the OpenStack page.
    * For **Availability Zones**, select which Availability Zones to use with the network.
3. Click **Save**.<%= vars.expand_network_azs %>

## <a id='assign-az'></a> Step 7: Assign AZs and Networks page

1. Click **Assign Availability Zones**.

    ![alt-text=""](../common/images/openstack/assign-az.png)

1. From the **Singleton Availability Zone** drop-down menu, select the availability zone that you created in a previous step. The BOSH Director installs in this Availability Zone.

2. From the **Network** drop-down menu, select the network you created in a previous step. BOSH Director installs in this network.

3. Click **Save**.


## <a id='security'></a> Step 8: Security page

<%= partial "../common/security-pane" %>

## <a id='bosh-dns'></a> Step 9: BOSH DNS Config page

<%= partial '../common/bosh-dns-config'  %>

## <a id='syslog'></a> Step 10: Syslog page

<%= partial "/pcf/ops-manager/syslog_bosh", :locals => { :syslog_context => 'BOSH Director' } %>

## <a id='resource-config'></a> Step 11: Resource Config page

1. Click **Resource Config**.

    ![alt-text=""](../common/images/openstack/om-resource-config.png)

1. Adjust any values as necessary for your deployment. Foir example, increasing the persistent disk size. Select **Automatic** from the drop-down menu to provision the amount of persistent disk predefined by the job. If the persistent disk field reads **None**, the job does not require persistent disk space. The editable values for each job are:

  * **INSTANCES**
  * **VM TYPE**
  * **PERSISTENT DISK TYPE**

    <p> For the BOSH Director job, select a VM type with at least 8&nbsp;GB memory.</p>
    <p> If you set a field to <strong>Automatic</strong> and the recommended resource allocation changes in a future version, <%= vars.ops_manager %> automatically uses the updated recommended allocation.</p>

1. (Optional) To define floating IP addresses for the BOSH Director job:
  1. Click the icon next to the **BOSH Director** job name to see the **FLOATING IPs** field.
  2. Enter a floating IP address range under **FLOATING IPs**. The number of IP addresses in the range that you provide must match the number of job instances.

2. Click **Save**.

## <a id='custom-vm-extensions'></a> Step 12: Add custom VM extensions (optional)

<%= partial "../common/vm-extension-config"  %>

## <a id='complete-ops'></a> Step 13: Complete BOSH Director installation

1. Click the <%= vars.ops_manager %> Installation Dashboard link to return to the Installation Dashboard.

1. Click **Review Pending Changes**, then click **Apply Changes**. If the following ICMP error message appears, click **Ignore errors and start the install**. The errors you can ignore are:

  * Cannot reach gateway with IP 10.0.16.0 (Ignorable if CMP is deactivated)
  * Cannot reach DNS with IP 10.0.0.2 (Ignorable if CMP is deactivated)

      ![alt-text=""](../common/images/openstack/icmp-error.png)

1. BOSH Director installation begins. When the installation process is complete, a **Changes Applied** message appears.

    ![alt-text=""](../common/images/openstack/om-installed.png)

1. After you complete this procedure, follow the instructions
in [Configuring <%= vars.app_runtime_abbr %>](https://docs.vmware.com/en/VMware-Tanzu-Application-Service/<%= vars.current_tas_version %>/tas-for-vms/configure-pas.html).

## Next steps

Return to [Installing <%= vars.ops_manager %> on OpenStack](../install/openstack.html).
