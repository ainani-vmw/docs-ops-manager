---
title: Rotating configurable Ops Manager leaf certificates
owner: Ops Manager
---

This topic describes how you can rotate configurable leaf certificates for your <%= vars.ops_manager_first %> deployment. To rotate all certificates in your <%= vars.ops_manager %> deployment, see [Rotating CAs and Leaf Certificates](rotate-cas-and-leaf-certs.html).

Configurable certificates are generated by the user and pasted into <%= vars.ops_manager %> configuration panes where needed. Examples include certificates that terminate SSL traffic into <%= vars.app_runtime_first %>, or authenticate a Single Sign-On for VMware Tanzu service plan to an external SAML server.

To rotate SAML certificates for both <%= vars.app_runtime_abbr %> and the Single Sign-On for VMware Tanzu service, see [Rotating Identity Provider SAML Certificates](rotate-saml-ca.html).

<p class='note caution'><strong>Caution:</strong> This procedure does not rotate the <%= vars.ops_manager %> root certificate authority (CA) or other CAs in your deployment. To rotate CAs and leaf certificates, see <a href="rotate-cas-and-leaf-certs.html">Rotating CAs and Leaf Certificates</a>.</p>

## <a id='prerequisites'></a> Prerequisites

<%= partial "rotate-cas-certs-prereqs" %>

## <a id='procedure'></a> Procedure

<%= partial 'minimum-duration' %>

To rotate configurable leaf certificates:

1. Navigate to the <%= vars.ops_manager %> Installation Dashboard.

1. For each certificate you want to rotate:
  1. Find the text field where the leaf certificate is configured within the <%= vars.ops_manager %> UI. You might need to look through multiple configuration panes to identify the location of the certificate configuration text field. The tile may not expose the field via the UI, in that case the value will need to be updated via the <%= vars.ops_manager %> API. Use the following fields to identify the location of the certificate configuration text field:
      * The `product_guid` field in the <%= vars.ops_manager %> API output can help identify the tile in which the certificate is configured. For example, the prefix `p-bosh-` refers to the BOSH Director tile, and the prefix `cf-` refers to the <%= vars.app_runtime_abbr %> tile.
      * The `property_reference` field in the <%= vars.ops_manager %> API output can help identify the configuration pane in which the certificate is configured. For example, the `uaa.service_provider_key_credentials` property is configured in the **UAA** pane of the <%= vars.app_runtime_abbr %> tile.
  1. Copy a new value for the leaf certificate into the text field or generate a new leaf certificate using the **Generate RSA Certificate** button.
  1. Click **Save** at the bottom of each pane in which you added new leaf certificates.

1. Return to the <%= vars.ops_manager %> Installation Dashboard.

1. Click **Review Pending Changes**.

1. Click **Apply Changes**.

## <a id='specialized-procedures'></a> Certificates with specialized procedures

Some certificates are not rotated when using the standard rotation procedure. The following table lists certificates that use a separate, specialized rotation procedure and provides links to documentation and Knowledge Base articles to help you rotate these certificates.

| Certificate | Tile | Procedure |
|-------------|------|-----------|
| `.properties.saml_service_provider_cert` | BOSH Director | [How to check and rotate Ops Manager SAML Certificate before it expires](https://community.pivotal.io/s/article/how-to-check-and-rotate-ops-manager-saml-certificate-before-it-expires) |
| `.uaa.service_provider_key_credentials` | <%= vars.app_runtime_abbr %> | [Rotating Identity Provider SAML Certificates](rotate-saml-ca.html) |

## <a id='troubleshooting'></a> Troubleshooting

<%= partial "/pcf/certs/troubleshooting-maestro-violations" %>
