---
title: Overview of certificate rotation in Ops Manager
owner: Ops Manager
---

This topic provides an overview of how you can rotate certificate authorities (CAs) and leaf certificates in <%= vars.ops_manager_first %>.

The <%= vars.ops_manager %> API manages and lists internal CAs and leaf certificates that enable <%= vars.ops_manager %> components to communicate with each other securely using TLS. It can also list certificates used externally, such as SAML certificates that authenticate to an external identity provider (IDP).

For more information about the CAs and leaf certificates visible to the <%= vars.ops_manager %> API, see [Certificate Types](certificate-types.html).

Rotate CAs and leaf certificates before they expire to avoid downtime for your deployment. To rotate certificates in <%= vars.ops_manager %>, first check the expiration dates of all certificates. Then, based on the types of certificates that expire soon, follow a certificate rotation procedure to replace expiring certificates and deploy BOSH to apply changes.

When possible, the <%= vars.ops_manager %> API invokes CredHub Maestro to rotate certificates. You might encounter CredHub Maestro safety violation errors if you attempt to perform an unsafe operation, such as running a rotation step out of order. For more information about troubleshooting these errors, see [Troubleshooting CredHub Maestro Safety Violations During Certificate Rotation](troubleshoot-cert-errors.html).

<%= partial 'minimum-duration' %>

## <a id='check-expiration-and-types'></a> Check Certificate Expiration Dates and Types

Before determining which certificate rotation procedure to follow, you must determine:

* Which types of CAs and leaf certificates exist in your deployment.
* Which CAs and leaf certificates are due to expire soon.
* Whether customer provided CAs exist in your deployment.

To check the types and expiration dates of your certificates, see [Checking Expiration Dates and Certificate Types](check-expiration.html).

<p class='note caution'><strong>Caution:</strong> If customer provided CAs exist in your deployment, you must do an additional procedure to successfully rotate. To see if you have customer-provided CAs and rotate them successfully, see <a href="rotate-customer-provided-cas.html">Rotating Certificates with Customer-Provided CAs</a>.</p>

## <a id='procedures'></a> Certificate Rotation Procedures

The topics listed in this section explain how to rotate certificates in <%= vars.ops_manager %>, including the <%= vars.ops_manager %> root CA, BOSH NATS CA, CAs stored in CredHub, and leaf certificates. There are different rotation procedures for each type of certificate that requires rotation.

<p class='note caution'><strong>Caution:</strong> The rotation procedures described in the following topics do not work if the certificates have already expired. If the certificates have expired, contact <%= vars.support_link %> for guidance.</p>

To rotate certificates, follow one of these procedures:

* To rotate non-rotatable certificates, contact <%= vars.support_link %>.

* To rotate CAs stored in <%= vars.ops_manager %> and CredHub, see [Rotating CAs and Leaf Certificates](rotate-cas-and-leaf-certs.html). This procedure also rotates the BOSH NATS CA as well as CAs stored in CredHub, such as the BOSH DNS CA and the Diego root CA.

* To rotate non-configurable leaf certificates, but not the <%= vars.ops_manager %> root CA or BOSH NATS CA, see [Rotating Non-Configurable Leaf Certificates](rotate-non-configurable-certs.html).

* To rotate configurable leaf certificates, but not the <%= vars.ops_manager %> root CA or BOSH NATS CA, see [Rotating Configurable Leaf Certificates](rotate-configurable-certs.html).


## <a id='other-certs'></a> Rotating Other Certificates

Other certificates that the <%= vars.ops_manager %> API does not rotate include:

* The Services TLS CA. To rotate this CA, see [Advanced Certificate Rotation with CredHub Maestro](advanced-certificate-rotation.html).

* IDP SAML certificates. To rotate IDP SAML certificates, see [Rotating Identity Provider SAML Certificates](rotate-saml-ca.html).

* IPsec certificates. To rotate IPsec certificates, see [Rotating IPsec Certificates](https://docs.pivotal.io/addon-ipsec/credentials.html) in the IPsec documentation.

* Certificates for any products that you deploy manually with BOSH.
To rotate these certificates, you must re-deploy the BOSH release and re-create its VMs using the BOSH CLI.

* CredHub-managed certificates for the following product versions:
    * <%= vars.app_runtime %> v2.7.0-v2.7.20.
    * <%= vars.app_runtime %> v2.8.0-v2.8.1.
    * <%= vars.segment_runtime_full %> tile v2.7.0-v2.7.20.
    * <%= vars.segment_runtime_full %> tile v2.8.0-v2.8.1.
    * Small Footprint <%= vars.app_runtime %> v2.7.0-v2.7.20.
    * Small Footprint <%= vars.app_runtime %> v2.8.0-v2.8.1.
    * <%= vars.windows_runtime_abbr %> v2.7.0-v2.7.16.
    * <%= vars.windows_runtime_abbr %> v2.8.0-v2.8.1.
