---
title: Rotating non configurable leaf certificates in Tanzu Operations Manager
owner: Ops Manager
---

You can rotate non configurable <%= vars.ops_manager_first %> leaf certificates that are visible to
the <%= vars.ops_manager %> API, whether they are managed and stored by <%= vars.ops_manager %> directly, or
by CredHub at <%= vars.ops_manager %> request. To rotate all certificates in
your <%= vars.ops_manager %> deployment, see [Rotating CAs and Leaf Certificates](rotate-cas-and-leaf-certs.html).

<p> This procedure does not rotate the <%= vars.ops_manager %> root certificate authority (CA) or other CAs in your deployment. To rotate CAs and leaf certificates, see <a href="rotate-cas-and-leaf-certs.html">Rotating CAs and Leaf Certificates</a>.</p>

## <a id='prerequisites'></a> Prerequisites

<%= partial "rotate-cas-certs-prereqs" %>

## <a id='procedure'></a> Procedure

<%= partial 'minimum-duration' %>

To rotate non configurable leaf certificates:

1. Call the <%= vars.ops_manager %> API `regenerate` endpoint by running:

    ```
    curl "https://OPS-MANAGER-FQDN/api/v0/certificate_authorities/active/regenerate" \
          -X POST \
          -H "Authorization: Bearer UAA-ACCESS-TOKEN" \
          -H "Content-Type: application/json" \
          -d '{}' \
          -i
    ```

    Where:

    * `OPS-MANAGER-FQDN` is the fully-qualified domain name (FQDN) of your <%= vars.ops_manager %> deployment.
    * `UAA-ACCESS-TOKEN` is your UAA access token.

    The API returns a successful response:
    <pre class="terminal">HTTP/1.1 200 OK</pre>

1. Go to <%= vars.ops_manager %> Installation Dashboard.

1. If you have any on demand service tiles installed, do the following for each on demand service tile:
    1. Click the tile.
    1. Click the **Errands** tab.
    1. Enable the **Upgrade All Service Instances** errand. Running this errand is necessary to push CredHub certificate updates to each service instance.
    1. Click **Review Pending Changes**.
    1. Click **Apply Changes**.

1. If you do not have any on demand service tiles installed:
    1. Click **Review Pending Changes**.
    1. Click **Apply Changes**.


## <a id='troubleshooting'></a> Troubleshooting

<%= partial "/pcf/certs/troubleshooting-maestro-violations" %>
