---
title: Jump upgrading to Ops Manager v3.0
owner: Ops Manager
---

This topic describes how you can upgrade to <%= vars.ops_manager_first %> <%= vars.v_major_version %> or later directly from v2.5 and later, skipping minor versions. This is called a jump upgrade.

## <a id='prerequisites'></a> Prerequisites

Before you jump upgrade to <%= vars.ops_manager %> <%= vars.v_major_version %> or later:

* If you are using <%= vars.ops_manager %> v2.10.8 or earlier, you must complete any in-progress CA rotation before you can jump upgrade. Failure to complete the CA rotation results in the inability to **Apply Changes** due to safety violations.

* If you are on <%= vars.ops_manager %> v2.4 or earlier, you must do standard upgrades for each version up to v2.5 before you can jump upgrade to <%= vars.v_major_version %>.

* To upgrade to <%= vars.ops_manager %> <%= vars.v_major_version %>, you must ensure that the products you have installed are compatible with <%= vars.ops_manager %> <%= vars.v_major_version %>. To create an upgrade path for your product tiles, see the [Upgrade Planner](https://upgrade-planner.pivotal.io/).

* You must have no changes to any product tile or service instance currently staged.

* If you are using vSphere with NSX-T, you must have NSX-T v2.3 or later installed.

## <a id='bosh-dns-migration'></a> BOSH DNS Certificates Regeneration

In <%= vars.ops_manager %> v2.10.9 and later, BOSH DNS leaf certificates are generated to include the subject alternative name (SAN) field. This migration process is required before you upgrade to <%= vars.ops_manager %> v2.10.33 and later. If you do not complete this migration before upgrading to v2.10.33 or later, you might experience unexpected BOSH DNS resolution issues until the change is rolled out to all VMs.

When you upgrade to v2.10.9 or later, the BOSH DNS leaf certificates are automatically regenerated to include the SAN field on the next **Apply Changes**.

To allow DNS certificate regeneration and avoid communication issues between system components:

1. Run the **Upgrade service instances** errand on all service tiles.

1. **Apply Changes** to all tiles.


## <a id='jump-upgrade'></a> Jump Upgrade

After you ensure your deployment meets the requirements described in [Prerequisites](#prerequisites), you can upgrade to <%= vars.ops_manager %> to <%= vars.v_major_version %> or later.

To jump upgrade to <%= vars.ops_manager %> to <%= vars.v_major_version %> or later:

1. Review the table in [Breaking Changes](#breaking-changes) below and address any breaking changes that apply to your current <%= vars.ops_manager %> version.

1. Follow the procedure in [Upgrading <%= vars.ops_manager %>](install/upgrading-pcf.html).


## <a id='breaking-changes'></a> Breaking Changes

The table below describes the breaking changes that affect <%= vars.ops_manager %> v2.5 through v2.9 and how to address them before upgrading:

<table>
	<tr>
		<th>Upgrading From</th>
		<th width="45%">Breaking Change</th>
		<th>Action Before Upgrading</th>
	</tr>
	<tr>
		<td>Any prior to v2.10.33</td>
		<td>For <%= vars.ops_manager %> v2.10.9 and later, BOSH DNS leaf certificates are generated to include the subject alternative name (SAN) field. If you do not distribute the BOSH DNS leaf certificates to all VMs, you can experience downtime caused by communication issues between system components.</td>
		<td>When upgrading to <%= vars.ops_manager %> v2.10.9 or later, run the <strong>Upgrade service instances</strong> errand on all service tiles and <strong>Apply Changes</strong> to all tiles. For more information, see <a href="#bosh-dns-migration">BOSH DNS Certificates Regeneration</a>.</td>
	</tr>
	<tr>
		<td>v2.5</td>
		<td>You can only SSH onto the <%= vars.ops_manager %> VM in a vSphere deployment with a private SSH key, not a password. You could get an error when authenticating that causes <%= vars.ops_manager %> to shut down and enter a reboot loop.</td>
		<td>Add a public key to the OVF template for the <%= vars.ops_manager %> VM. Then, use the private key to SSH onto the <%= vars.ops_manager %> VM. For more information, see <a href="vsphere/deploy.html#deploy">Deploy <%= vars.ops_manager %></a> in <em>Deploying <%= vars.ops_manager %> on vSphere</em>.</td>
	</tr>
	<tr>
		<td>v2.5</td>
		<td>The <code>stemcell</code> property for the <%= vars.ops_manager %> API
			<code>/api/v0/diagnostic_report</code> endpoint is removed. This could cause
			an error when retrieving <%= vars.ops_manager %> diagnostic reports.</td>
		<td>Update any automation scripts that use the <code>stemcell</code> property.
			For more information, see
			<a href="https://docs.pivotal.io/pivotalcf/2-6/pcf-release-notes/breaking-changes.html#diagnostic-report-stemcell">Stemcell Property for Diagnostic Report API Endpoint is Removed</a>
			in <em><%= vars.ops_manager %> v2.6 Release Notes</em>.</td>
	</tr>
	<tr>
		<td>v2.5</td>
		<td>The <code>stemcell</code> version key for pending changes is moved and
			renamed. This could cause an error when retrieving <%= vars.ops_manager %>
			API pending changes.</td>
		<td>Update your automation scripts that use the <code>stemcell</code> information
			in the <code>/api/v0/pending_changes</code> endpoint.</td>
	</tr>
	<tr>
		<td>v2.5</td>
		<td>Trusty stemcells 3541 and earlier are no longer supported. If your deployment
			is on AWS and using outdated stemcells, <%= vars.ops_manager %> fails to
			boot.</td>
		<td>Install Xenial stemcells or Trusty stemcell 3586 or later. For more
			information, see <a href="https://docs.pivotal.io/pivotalcf/2-6/pcf-release-notes/breaking-changes.html#5th-gen-instances">AWS Deployments Use 5th Generation Instances</a> in
			<em><%= vars.ops_manager %> v2.6 Release Notes</em>.</td>
	</tr>
	<tr>
		<td>v2.5 and v2.6</td>
		<td>The <code>/api/v0/stemcells_assignments</code> endpoint in the <%= vars.ops_manager %>
			API is removed. This could cause an error when retrieving <%= vars.ops_manager %>
			API stemcell assignments.</td>
		<td>Update your automation scripts to use the <code>/api/v0/stemcell_associations</code>
			endpoint instead. For more information, see
			<a href="https://docs.pivotal.io/platform/2-7/opsman-api/#stemcell-associations-for-products">Stemcell Associations for Products</a>
			in the <%= vars.ops_manager %> API documentation.</td>
	</tr>
	<tr>
		<td>v2.5 and v2.6</td>
		<td><%= vars.ops_manager %> v2.10 installs a later version of the BOSH CLI.
			This can cause your BOSH CLI automation scripts to stop working.</td>
		<td>Update your automation scripts to use BOSH CLI v2. For more information, see
			<a href="https://bosh.io/docs/cli-v2-install/">Installing the CLI</a> and
			<a href="https://bosh.io/docs/cli-v2/">Commands</a> in the BOSH documentation.</td>
	</tr>
	<tr>
		<td>v2.5 and v2.6</td>
		<td>Certain properties within a collection or selector are no longer configurable
			in the <%= vars.ops_manager %> UI and API.</td>
		<td>Update your automation scripts to remove these properties. For more information
			about the tile properties you can configure in <%= vars.ops_manager %> v2.10.2,
			see the release notes for that tile.</td>
	</tr>
	<tr>
		<td>v2.5 and v2.6</td>
		<td>The <code>nsx_security_groups</code> property is renamed <code>security_groups</code>
			for NSX-V deployments and <code>ns_groups</code> for NSX-T deployments.
			Additionally, the <%= vars.ops_manager %> API does not recognize NSX-related
			properties that are not nested under an <code>nsx</code> or <code>nsxt</code>
			key. If your deployment is on vSphere, <%= vars.ops_manager %> API does not
			update parameters for NSX-V or NSX-T.</td>
		<td>Update your automation scripts to use the appropriate properties for your
			deployment. For more information, see <a href="https://docs.pivotal.io/ops-manager/3-0/api/#tag/Job-Resource-Configuration/paths/~1api~1v0~1staged~1products~1{product_guid}~1jobs~1{job_id}~1resource_config/get">Configuring resources for a job</a>
			in the <%= vars.ops_manager %> API documentation.</td>
	</tr>
	<tr>
		<td>v2.5, v2.6, and v2.7</td>
		<td>
			If TLS is not enabled before upgrade and Windows stemcells are in use,
			<strong>Apply Changes</strong> can fail. <%= vars.ops_manager %> enables
			TLS by default when an internal blobstore is configured.
		</td>
		<td>Enable the internal blobstore TLS on the <strong>Director Config</strong> pane under the <strong>BOSH Director</strong> tile. To re-create all Windows-based VMs, do one of the following:
			<ul>
				<li>Upload and deploy a newer Windows stemcell to all relevant tiles.</li>
				<li>Enable the <strong>Recreate VMs deployed by the BOSH Director</strong> check box in the <strong>Director Config</strong> pane and deploy all relevant tiles.</li>
			</ul>
		</td>
	</tr>
	<tr>
		<td>v2.5, v2.6, v2.7, and v2.8</td>
		<td><%= vars.ops_manager %> v2.9 is incompatible with vSphere Data Center NSX-T v2.2 and earlier.</td>
		<td>Upgrade to NSX-T v2.3 or later. For more information, see <a href="https://docs.pivotal.io/ops-manager/2-9/release-notes.html#breaking-changes">Ops Manager v2.9 Incompatible with vSphere Data Center NSX-T v2.2 and Earlier</a> in <em><%= vars.ops_manager %> v2.9 Release Notes</em>.</td>
	</tr>
	<tr>
		<td>v2.8 and v2.9</td>
		<td>
			<%= vars.ops_manager %> v2.10 includes CredHub Maestro v8.0. In this version of CredHub Maestro, the `maestro update-transitional latest` command is removed.
		</td>
		<td>If you have scripts that rely on the `maestro update-transitional latest` command, remove references to the command before you upgrade to <%= vars.ops_manager %> <%= vars.v_major_version %>.
			In CredHub Maestro v8.0, you run `maestro regenerate ca` to regenerate a certificate authority (CA) and mark the latest version of the CA as transitional. This command performs both actions, while previous versions of CredHub Maestro use a separate command for each task.
		</td>
	</tr>
</table>

For breaking changes between <%= vars.ops_manager %> v2.10 and <%= vars.v_major_version %>, see [Breaking Changes in <%= vars.ops_manager %> <%= vars.v_major_version %>](release-notes.html#breaking-changes).
